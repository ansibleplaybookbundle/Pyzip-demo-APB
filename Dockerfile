FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHB5emlwLWRlbW8tYXBiCmltYWdlOiBhbnNpYmxlcGxheWJvb2ti\
dW5kbGUvcHl6aXAtZGVtby1hcGIKZGVzY3JpcHRpb246IFB5dGhvbiBaaXAgRGVtbyBBUEIgSW1w\
bGVtZW50YXRpb24KYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YTogCiAg\
ZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9naXRodWIuY29tL2Z1c29yL2FwYi1leGFtcGxlcy90\
cmVlL21hc3Rlci9weXppcC1kZW1vLWFwYgogIGRlcGVuZGVuY2llczogWydkb2NrZXIuaW8vYW5z\
aWJsZXBsYXlib29rYnVuZGxlL3B5LXppcC1kZW1vOmxhdGVzdCddCiAgZGlzcGxheU5hbWU6IFB5\
emlwIERlbW8gKEFQQikKICBsb25nRGVzY3JpcHRpb246IEFQQiBJbXBsZW1lbnRhdGlvbiBvZiB0\
aGUgUHl0aG9uIHdlYmFwcCwgaHR0cHM6Ly9naXRodWIuY29tL2Z1c29yL3B5LXppcC1kZW1vCiAg\
cHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGVm\
YXVsdAogICAgZGVzY3JpcHRpb246IFB5dGhvbiBaaXAgRGVtbyBBUEIgSW1wbGVtZW50YXRpb24K\
ICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGVmYXVsdAog\
ICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRlcyBhIHB5dGhvbiB3ZWJhcHAg\
Zm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mdXNvci9weS16aXAtZGVtbwogICAgICBjb3N0OiAkMC4w\
MAogICAgcGFyYW1ldGVyczogW10K"

ADD playbooks /opt/apb/actions
ADD roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
