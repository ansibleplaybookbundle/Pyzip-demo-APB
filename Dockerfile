FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wLjAKbmFtZTogcHl6aXAtZGVtby1hcGIKZGVzY3JpcHRpb246IFB5dGhvbiBa\
aXAgRGVtbyBBUEIgSW1wbGVtZW50YXRpb24KYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25h\
bAptZXRhZGF0YTogCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly9naXRodWIuY29tL2Z1c29y\
L2FwYi1leGFtcGxlcy90cmVlL21hc3Rlci9weXppcC1kZW1vLWFwYgogIGRlcGVuZGVuY2llczog\
Wydkb2NrZXIuaW8vYW5zaWJsZXBsYXlib29rYnVuZGxlL3B5LXppcC1kZW1vOmxhdGVzdCddCiAg\
ZGlzcGxheU5hbWU6IFB5emlwIERlbW8gKEFQQikKICBsb25nRGVzY3JpcHRpb246IEFQQiBJbXBs\
ZW1lbnRhdGlvbiBvZiB0aGUgUHl0aG9uIHdlYmFwcCwgaHR0cHM6Ly9naXRodWIuY29tL2Z1c29y\
L3B5LXppcC1kZW1vCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4iCnBsYW5z\
OgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFB5dGhvbiBaaXAgRGVtbyBBUEIg\
SW1wbGVtZW50YXRpb24KICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5\
TmFtZTogRGVmYXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRlcyBh\
IHB5dGhvbiB3ZWJhcHAgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mdXNvci9weS16aXAtZGVtbwog\
ICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogW10K"

ADD playbooks /opt/apb/actions
ADD roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
